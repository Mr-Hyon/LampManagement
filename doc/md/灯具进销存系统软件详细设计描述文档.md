# 灯具进销存系统软件详细设计描述文档
## V0.1
## Team Touchfish
### 修改次数标注

## 目录




## 1.引言
### 1.1 编制目的
本报告详细完成对灯具进销存系统的详细设计，达到指导后续软件构造的目的，同时实现和测试人员及用户的沟通。  
本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。
### 1.2 词汇表

词汇名称 | 词汇含义|备注
---| --- |---
   |     |
   |     |

### 1.3 参考资料
 灯具进销存系统软件体系结构描述文档V1.0  
 灯具进销存系统用例文档V1.1
 
## 2.产品概述
参考灯具进销存系统用例文档和灯具进销存系统软件需求规格说明文档中对产品的概括描述。  

## 3.体系结构设计概述  
参考灯具进销存系统软件体系结构描述文档的描述

## 4.结构视角
### 4.1 展示层的分解

#### 4.1.1 展示层设计概要
根据需求，系统存在26个用户界面（加粗为主界面）：**登录界面**、 **库存管理人员主界面**、商品分类管理界面、商品管理界面、库存查看界面、库存盘点界面、库存赠送界面、库存报警界面、**进销管理人员主界面**、客户管理界面、制定进货单界面、制定进货退货单界面、制定销售单界面、制定销售退货单界面、**财务人员主界面**、账号管理界面、制定账单界面、查看销售明细界面、查看经营历程界面、查看经营情况界面、期初建账界面、红冲界面、**总经理主界面**、查看单据界面、制定销售策略界面、审批编辑单据界面。  
界面跳转如图所示。  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/体系结构文档图片/界面跳转图.png)

#### 4.1.2 展示层内部包的职责与划分
<table>
<tr>
<td>模块</td>
<td>包名</td>
<td>类名</td>
<td>功能</td>
</tr>
<tr>
<td rowspan="2">MainMenu</td>
<td rowspan="2">Login</td>
<td>LoginPanel</td>
<td>登陆界面</td>
</tr>
<tr>
<td>RegisterPanel</td>
<td>注册界面</td>
</tr>
<tr>
<td rowspan="14">Manager</td>
<td rowspan="2">viewSaleTable</td>
<td>saleTablePanel</td>
<td>销售明细表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="3">viewManagementProcess</td>
<td>managementProcessPanel</td>
<td>经营历程表界面</td>
</tr>
<tr>
<td>detailPanel</td>
<td>表单详细信息界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="2">viewManagementSituation</td>
<td>managementSituationPanel</td>
<td>经营情况表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<td rowspan="3">verify</td>
<td>receiptListPanel</td>
<td>单据列表界面</td>
</tr>
<tr>
<td>verifyPanel</td>
<td>审批界面</td>
</tr>
<tr>
<td>modifyPanel</td>
<td>单据编辑界面</td>
</tr>
<td rowspan="4">promotion</td>
<td>promotionPanel</td>
<td>现有促销策略界面</td>
</tr>
<tr>
<td>detailPanel</td>
<td>促销策略详细信息界面</td>
</tr>
<tr>
<td>newStrategyPanel</td>
<td>新增促销策略界面</td>
</tr>
<tr>
<td>deletePanel</td>
<td>删除确认界面</td>
</tr>
<tr>
<td rowspan="21">Finance</td>
<td rowspan="5">manageAccount</td>
<td>addPanel</td>
<td>账户增加界面</td>
</tr>
<tr>
<td>deletePanel</td>
<td>账户删除界面</td>
</tr>
<tr>
<td>modifyPanel</td>
<td>账户修改界面</td>
</tr>
<tr>
<td>findPanel</td>
<td>账户查找界面</td>
</tr>
<tr>
<td>viewPanel</td>
<td>账户查看界面</td>
</tr>
<tr>
<td rowspan="2">makeReceipt</td>
<td>editReceiptPanel</td>
<td>编辑收款单界面</td>
</tr>
<tr>
<td>confirmPanel</td>
<td>确认提交界面</td>
</tr>
<tr>
<td rowspan="2">makePayment</td>
<td>editPaymentPanel</td>
<td>编辑付款单界面</td>
</tr>
<tr>
<td>confirmPanel</td>
<td>确认提交界面</td>
</tr>
<tr>
<td rowspan="2">viewSaleTable</td>
<td>saleTablePanel</td>
<td>销售明细表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="5">viewManagementProcess</td>
<td>managementProcessPanel</td>
<td>经营历程表界面</td>
</tr>
<tr>
<td>detailPanel</td>
<td>表单详细信息界面</td>
</tr>
<tr>
<td>reverse</td>
<td>红冲确认界面</td>
</tr>
<tr>
<td>reverseAndCopy</td>
<td>红冲并复制确认界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="2">viewManagementSituation</td>
<td>managementSituationPanel</td>
<td>经营情况表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="3">initialAccount</td>
<td>initialPanel</td>
<td>期初建账界面</td>
</tr>
<tr>
<td>editPanel</td>
<td>修改账户信息界面</td>
</tr>
<tr>
<td>showPanel</td>
<td>显示期初信息界面</td>
</tr>
<td rowspan="10">Purchase&Sales</td>
<td rowspan="2">Purchase</td>
<td>PurchasePanel</td>
<td>制定进货单界面</td>
</tr><tr>
<td>UnpurchasePanel</td>
<td>制定进货退货单界面</td>
</tr><tr>
<td rowspan="2">Sales</td>
<td>SalesPanel</td>
<td>制定销售单界面</td>
</tr><tr>
<td>UnsalesPanel</td>
<td>制定销售退货单界面</td>
</tr><tr>
<td rowspan="4">Client</td>
<td>MessagePanel</td>
<td>客户详细信息界面</td>
</tr><tr>
<td>AddPanel</td>
<td>增加客户信息界面</td>
</tr><tr>
<td>DeletePanel</td>
<td>删除客户信息界面</td>
</tr><tr>
<td>EditPanel</td>
<td>修改客户信息界面</td>
</tr><tr>
<td colspan="2">Purchase&SalesMain</td>
<td>进货销售人员主界面</td>
</tr><tr>
<td colspan="2">Purchase&SalesController</td>
<td>进货销售人员界面跳转控制器</td>
</tr><tr>
</table>


### 4.2 业务逻辑层的分解
业务逻辑层的开发包图请查看体系结构设计文档。
#### 4.2.1 userbl模块

##### 4.2.1.1 模块概述
userbl模块的职责及接口参见灯具进销存系统软件体系结构描述文档V1.0

##### 4.2.1.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.userblservice接口。业务逻辑层和数据层之间添加dataservice.userdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了userController，这样userController会将对用户的业务逻辑处理委托给user对象。userPO是作为系统用户信息的持久化对象被添加到设计模型里去的。


####  4.2.2 salesbl模块
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.salesblservice接口。业务逻辑层和数据层之间添加dataservice.salesdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了salesController，这样salesController会将对用户的业务逻辑处理委托给sales对象。salesPO是作为系统用户信息的持久化对象被添加到设计模型里去的。

salesbl的设计如下图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E5%9B%BE/Salesbl%E6%A8%A1%E5%9D%97%E5%90%84%E4%B8%AA%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)  


#### 4.2.3 purchasebl模块  
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.purchaseblservice接口。业务逻辑层和数据层之间添加dataservice.purchasedataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了purchaseController，这样purchaseController会将对用户的业务逻辑处理委托给purchase对象。purchasePO是作为系统用户信息的持久化对象被添加到设计模型里去的。  

purchasebl的设计如下图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E5%9B%BE/purchasebl%E6%A8%A1%E5%9D%97%E5%90%84%E4%B8%AA%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)

#### 4.2.4 clientbl模块 
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.clientblservice接口。业务逻辑层和数据层之间添加dataservice.clientdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了clientController，这样clientController会将对用户的业务逻辑处理委托给client对象。clientPO是作为系统用户信息的持久化对象被添加到设计模型里去的。  
clientbl的设计如下图所示
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E5%9B%BE/clientbl%E6%A8%A1%E5%9D%97%E5%90%84%E4%B8%AA%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)