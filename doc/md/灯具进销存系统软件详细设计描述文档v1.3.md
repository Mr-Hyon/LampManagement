# 灯具进销存系统软件详细设计描述文档
## V1.3
## Team Touchfish
### 修改次数标注


修改日期| 修改人| 修改目的
---|---|---
2017.10.31| 杨屹劼 | 组织详细设计文档的草稿 加入展示层分解。（v0.1）
2017.11.7 | 杨屹劼 | 补充逻辑层，数据层分解，整合整个详细设计文档（v1.0)  
2017.11.14| 杨屹劼 | 修改部分逻辑层分解的疏漏（v1.1） 
2017.11.19| 杨屹劼 | 修改部分叙述（v1.2)
2018.1.13| 张雨豪 | 修改部分接口以匹配实际设计（v1.3）



## 目录
1. 引言  
    1.1 编制目的  
    1.2 词汇表  
    1.3 参考资料  
2. 产品概述 
3. 体系结构设计概述
4. 结构视角  
   4.1.  展示层的分解  
   4.2.  逻辑层的分解  
   4.3.  数据层的分解
5. 依赖视角




## 1.引言
### 1.1 编制目的
本报告详细完成对灯具进销存系统的详细设计，达到指导后续软件构造的目的，同时实现和测试人员及用户的沟通。  
本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。
### 1.2 词汇表

词汇 | 词汇含义|备注
---| --- |---
  Finance |     |
   |     |

### 1.3 参考资料
 灯具进销存系统软件体系结构描述文档V1.0  
 灯具进销存系统用例文档V1.1
 
## 2.产品概述
参考灯具进销存系统用例文档和灯具进销存系统软件需求规格说明文档中对产品的概括描述。  

## 3.体系结构设计概述  
参考灯具进销存系统软件体系结构描述文档的描述

## 4.结构视角
### 4.1 展示层的分解

#### 4.1.1 展示层设计概要
根据需求，系统存在26个用户界面（加粗为主界面）：**登录界面**、 **库存管理人员主界面**、商品分类管理界面、商品管理界面、库存查看界面、库存盘点界面、库存赠送界面、库存报警界面、**进销管理人员主界面**、客户管理界面、制定进货单界面、制定进货退货单界面、制定销售单界面、制定销售退货单界面、**财务人员主界面**、账号管理界面、制定账单界面、查看销售明细界面、查看经营历程界面、查看经营情况界面、期初建账界面、红冲界面、**总经理主界面**、查看单据界面、制定销售策略界面、审批编辑单据界面。  
界面跳转如图所示。  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/体系结构文档图片/界面跳转图.png)

#### 4.1.2 展示层内部包的职责与划分
<table>
<tr>
<td>模块</td>
<td>包名</td>
<td>类名</td>
<td>功能</td>
</tr>
<tr>
<td rowspan="2">MainMenu</td>
<td rowspan="2">Login</td>
<td>LoginPanel</td>
<td>登陆界面</td>
</tr>
<tr>
<td>RegisterPanel</td>
<td>注册界面</td>
</tr>
<tr>
<td rowspan="14">Manager</td>
<td rowspan="2">viewSaleTable</td>
<td>saleTablePanel</td>
<td>销售明细表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="3">viewManagementProcess</td>
<td>managementProcessPanel</td>
<td>经营历程表界面</td>
</tr>
<tr>
<td>detailPanel</td>
<td>表单详细信息界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="2">viewManagementSituation</td>
<td>managementSituationPanel</td>
<td>经营情况表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<td rowspan="3">verify</td>
<td>receiptListPanel</td>
<td>单据列表界面</td>
</tr>
<tr>
<td>verifyPanel</td>
<td>审批界面</td>
</tr>
<tr>
<td>modifyPanel</td>
<td>单据编辑界面</td>
</tr>
<td rowspan="4">promotion</td>
<td>promotionPanel</td>
<td>现有促销策略界面</td>
</tr>
<tr>
<td>detailPanel</td>
<td>促销策略详细信息界面</td>
</tr>
<tr>
<td>newStrategyPanel</td>
<td>新增促销策略界面</td>
</tr>
<tr>
<td>deletePanel</td>
<td>删除确认界面</td>
</tr>
<tr>
<td rowspan="21">Finance</td>
<td rowspan="5">manageAccount</td>
<td>addPanel</td>
<td>账户增加界面</td>
</tr>
<tr>
<td>deletePanel</td>
<td>账户删除界面</td>
</tr>
<tr>
<td>modifyPanel</td>
<td>账户修改界面</td>
</tr>
<tr>
<td>findPanel</td>
<td>账户查找界面</td>
</tr>
<tr>
<td>viewPanel</td>
<td>账户查看界面</td>
</tr>
<tr>
<td rowspan="2">makeReceipt</td>
<td>editReceiptPanel</td>
<td>编辑收款单界面</td>
</tr>
<tr>
<td>confirmPanel</td>
<td>确认提交界面</td>
</tr>
<tr>
<td rowspan="2">makePayment</td>
<td>editPaymentPanel</td>
<td>编辑付款单界面</td>
</tr>
<tr>
<td>confirmPanel</td>
<td>确认提交界面</td>
</tr>
<tr>
<td rowspan="2">viewSaleTable</td>
<td>saleTablePanel</td>
<td>销售明细表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="5">viewManagementProcess</td>
<td>managementProcessPanel</td>
<td>经营历程表界面</td>
</tr>
<tr>
<td>detailPanel</td>
<td>表单详细信息界面</td>
</tr>
<tr>
<td>reverse</td>
<td>红冲确认界面</td>
</tr>
<tr>
<td>reverseAndCopy</td>
<td>红冲并复制确认界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="2">viewManagementSituation</td>
<td>managementSituationPanel</td>
<td>经营情况表界面</td>
</tr>
<tr>
<td>derivePanel</td>
<td>导出确认界面</td>
</tr>
<tr>
<td rowspan="3">initialAccount</td>
<td>initialPanel</td>
<td>期初建账界面</td>
</tr>
<tr>
<td>editPanel</td>
<td>修改账户信息界面</td>
</tr>
<tr>
<td>showPanel</td>
<td>显示期初信息界面</td>
</tr>
<td rowspan="10">Purchase&Sales</td>
<td rowspan="2">Purchase</td>
<td>PurchasePanel</td>
<td>制定进货单界面</td>
</tr><tr>
<td>UnpurchasePanel</td>
<td>制定进货退货单界面</td>
</tr><tr>
<td rowspan="2">Sales</td>
<td>SalesPanel</td>
<td>制定销售单界面</td>
</tr><tr>
<td>UnsalesPanel</td>
<td>制定销售退货单界面</td>
</tr><tr>
<td rowspan="4">Client</td>
<td>MessagePanel</td>
<td>客户详细信息界面</td>
</tr><tr>
<td>AddPanel</td>
<td>增加客户信息界面</td>
</tr><tr>
<td>DeletePanel</td>
<td>删除客户信息界面</td>
</tr><tr>
<td>EditPanel</td>
<td>修改客户信息界面</td>
</tr><tr>
<td colspan="2">Purchase&SalesMain</td>
<td>进货销售人员主界面</td>
</tr><tr>
<td colspan="2">Purchase&SalesController</td>
<td>进货销售人员界面跳转控制器</td>
</tr><tr>
</table>


### 4.2 业务逻辑层的分解
业务逻辑层的开发包图请查看体系结构设计文档。
#### 4.2.1 userbl模块

##### 4.2.1.1 模块概述
userbl模块的职责及接口参见灯具进销存系统软件体系结构描述文档V1.0

##### 4.2.1.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.userblservice接口。业务逻辑层和数据层之间添加dataservice.userdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了userController，这样userController会将对用户的业务逻辑处理委托给user对象。userPO是作为系统用户信息的持久化对象被添加到设计模型里去的。  
userbl的设计如下图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/user%20bl.png)

##### 4.2.1.3 内部类的接口规范
##### Controller类的接口规范
<table width="100%" border="0">
<tr>
<td colspan="4">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">UserController.add</td>
<td>语法</td>
<td>public ResultMessage add(UserVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账户原先不存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加该用户信息</td>
</tr>
<tr>
<td rowspan="3">UserController.delete</td>
<td>语法</td>
<td>public ResultMessage delete(UserVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账户原先已存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除该用户信息</td>
</tr>
<tr>
<td rowspan="3">UserController.update</td>
<td>语法</td>
<td>public ResultMessage update(UserVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更新用户信息</td>
</tr>
<tr>
<td rowspan="3">UserController.findById</td>
<td>语法</td>
<td>public ArrayList<UserVO> findById(String id)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的ID符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回该ID的用户信息</td>
</tr>
<tr>
<td rowspan="3">UserController.findByName</td>
<td>语法</td>
<td>public ArrayList<UserVO> findByName(String name)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的用户名符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回该用户名的用户信息</td>
</tr>
<tr>
<td rowspan="3">UserController.findByType</td>
<td>语法</td>
<td>public ArrayList<UserVO> findByType(UserType type)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的用户类型符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合该用户类型的用户信息</td>
</tr>
<tr>
<td rowspan="3">UserController.show</td>
<td>语法</td>
<td>public ArrayList<UserVO> show()</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回系统用户信息</td>
</tr>
<tr>
<td rowspan="3">UserController.login</td>
<td>语法</td>
<td>public UserType login(String id,String password)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的id与密码符合输入规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回用户类型</td>
</tr>
<tr>
<td colspan="4">需要的服务（需接口）</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
</tr>
<tr>
<td colspan="2">UserController.add</td>
<td colspan="2">系统添加用户信息</td>
</tr>
<tr>
<td colspan="2">UserController.delete</td>
<td colspan="2">系统删除用户信息</td>
</tr>
<tr>
<td colspan="2">UserController.update</td>
<td colspan="2">系统修改用户信息</td>
</tr>
<tr>
<td colspan="2">UserController.findByName</td>
<td colspan="2">系统根据用户名查找用户</td>
</tr>
<tr>
<td colspan="2">UserController.findByType</td>
<td colspan="2">系统根据用户类型查找用户</td>
</tr>
<tr>
<td colspan="2">UserController.show</td>
<td colspan="2">系统返回所有用户信息</td>
</tr>
<tr>
<td colspan="2">UserController.login</td>
<td colspan="2">系统令用户登陆</td>
</tr>
</table>

##### Domain类的接口规范

<table width="100%" border="0">
<tr>
<td colspan="4">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">User.add</td>
<td>语法</td>
<td>public ResultMessage add(UserVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账户原先不存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加该用户信息</td>
</tr>
<tr>
<td rowspan="3">User.delete</td>
<td>语法</td>
<td>public ResultMessage delete(UserVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账户原先已存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除该用户信息</td>
</tr>
<tr>
<td rowspan="3">User.update</td>
<td>语法</td>
<td>public ResultMessage update(UserVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更新用户信息</td>
</tr>
<tr>
<td rowspan="3">User.findById</td>
<td>语法</td>
<td>public ArrayList<UserVO> findById(String id)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的ID符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回该ID的用户信息</td>
</tr>
<tr>
<td rowspan="3">User.findByName</td>
<td>语法</td>
<td>public ArrayList<UserVO> findByName(String name)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的用户名符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回该用户名的用户信息</td>
</tr>
<tr>
<td rowspan="3">User.findByType</td>
<td>语法</td>
<td>public ArrayList<UserVO> findByType(UserType type)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的用户类型符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合该用户类型的用户信息</td>
</tr>
<tr>
<td rowspan="3">User.show</td>
<td>语法</td>
<td>public ArrayList<UserVO> show()</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回系统用户信息</td>
</tr>
<tr>
<td rowspan="3">User.login</td>
<td>语法</td>
<td>public UserType login(String id,String password)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的id与密码符合输入规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回用户类型</td>
</tr>
<tr>
<td colspan="4">需要的服务（需接口）</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
</tr>
<tr>
<td colspan="2">DataFactory.getUserData()</td>
<td colspan="2">得到User数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">UserDataService.insert(UserPO po)</td>
<td colspan="2">插入UserPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">UserDataService.delete(UserPO po)</td>
<td colspan="2">删除UserPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">UserDataService.update(UserPO po)</td>
<td colspan="2">修改UserPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">UserDataService.findByName(String name)</td>
<td colspan="2">根据用户名查找UserPO持久化对象</td>
</tr>
<tr>
<td colspan="2">UserDataService.findByType(UserType type)</td>
<td colspan="2">根据用户类型查找UserPO持久化对象</td>
</tr>
<tr>
<td colspan="2">UserDataService.show()</td>
<td colspan="2">得到所有UserPO持久化对象</td>
</tr>
</table>

##### 4.2.1.4 动态模型
用户管理的动态模型如图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/user%20sequence.png)  

##### 4.2.1.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.2 commoditybl模块
##### 4.2.2.1 模块概述
commoditybl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。  
commoditybl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。
##### 4.2.2.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.commodityblservice接口。业务逻辑层和数据层之间添加dataservice.commoditydataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了commodityController，这样commodityController会将对用户的业务逻辑处理委托给commodity对象。commodityPO是作为系统用户信息的持久化对象被添加到设计模型里去的。  
commoditybl的设计如下图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/commodity%20bl.png)  

##### 4.2.2.3 模块内部类的接口规范
##### controller模块的接口规范

<table width="100%" border="0">
<tr>
<td colspan="4">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">CommodityController.addType</td>
<td>语法</td>
<td>public ResultMessage addType(CommodityTypeVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品分类原先不存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加该商品分类信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.deleteType</td>
<td>语法</td>
<td>public ResultMessage deleteType(CommodityTypeVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品分类原先已存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除该商品分类信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.updateType</td>
<td>语法</td>
<td>public ResultMessage updateType(CommodityTypeVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品分类原先已存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更新商品分类信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.add</td>
<td>语法</td>
<td>public ResultMessage add(CommodityVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先不存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加该商品信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.delete</td>
<td>语法</td>
<td>public ResultMessage delete(CommodityVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除该商品信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.update</td>
<td>语法</td>
<td>public ResultMessage update(CommodityVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改商品信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.show</td>
<td>语法</td>
<td>public ArrayList<CommodityVO> show()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有商品信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.showByName</td>
<td>语法</td>
<td>public CommodityVO showByName(String name)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的查询信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回符合该商品名称的商品信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.showByType</td>
<td>语法</td>
<td>public ArrayList<CommodityVO> showByType(String type)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的查询信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回符合该商品类型的商品信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.showSort</td>
<td>语法</td>
<td>public ArrayList<CommodityTypeVO> showSort()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的查询信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有商品类型信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.addCommodityBill</td>
<td>语法</td>
<td>public ResultMessage addCommodityBill(CommodityBillVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的报损报溢单信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加报损报溢单信息</td>
</tr>
<tr>
<td rowspan="3">CommodityController.showCommodityBill</td>
<td>语法</td>
<td>public ArrayList<CommodityBillVO> showCommodityBill() throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有报损报溢单</td>
</tr>
<tr>
<td rowspan="3">CommodityController.getCommodityBill</td>
<td>语法</td>
<td>public ArrayList<CommodityBillVO> getCommodityBill(String startDate,String endDate) throws RemoteException, ParseException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回该时间段内的所有报损报溢单</td>
</tr>
<tr>
<td colspan="4">需要的服务（需接口）</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
</tr>
<tr>
<td colspan="2">Commodity.add</td>
<td colspan="2">系统增加商品信息</td>
</tr>
<tr>
<td colspan="2">Commodity.delete</td>
<td colspan="2">系统删除商品信息</td>
</tr>
<tr>
<td colspan="2">Commodity.update</td>
<td colspan="2">系统修改商品信息</td>
</tr>
<tr>
<td colspan="2">Commodity.show</td>
<td colspan="2">返回所有商品信息</td>
</tr>
<tr>
<td colspan="2">Commodity.showByName</td>
<td colspan="2">根据商品名称查找商品信息</td>
</tr>
<tr>
<td colspan="2">Commodity.showByType</td>
<td colspan="2">根据商品类型查找商品信息</td>
</tr>
<tr>
<td colspan="2">Commodity.showSort</td>
<td colspan="2">返回所有商品分类信息</td>
</tr>
<tr>
<td colspan="2">Commodity.addCommodityBill</td>
<td colspan="2">系统增加报损报溢单信息</td>
</tr>
<tr>
<td colspan="2">Commodity.showCommodityBill</td>
<td colspan="2">返回所有报损报溢单信息</td>
</tr><tr>
<td colspan="2">Commodity.getCommodityBill</td>
<td colspan="2">返回所有该时段内的报损报溢单信息</td>
</tr>
</table>

##### domain模块的接口规范

<table width="100%" border="0">
<tr>
<td colspan="4">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">Commodity.addType</td>
<td>语法</td>
<td>public ResultMessage addType(CommodityTypeVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品分类原先不存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加该商品分类信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.deleteType</td>
<td>语法</td>
<td>public ResultMessage deleteType(CommodityTypeVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品分类原先已存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除该商品分类信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.updateType</td>
<td>语法</td>
<td>public ResultMessage updateType(CommodityTypeVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品分类原先已存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更新商品分类信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.add</td>
<td>语法</td>
<td>public ResultMessage add(CommodityVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先不存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加该商品信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.delete</td>
<td>语法</td>
<td>public ResultMessage delete(CommodityVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除该商品信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.update</td>
<td>语法</td>
<td>public ResultMessage update(CommodityVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先存在，输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改商品信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.show</td>
<td>语法</td>
<td>public ArrayList<CommodityVO> show()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有商品信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.showByName</td>
<td>语法</td>
<td>public CommodityVO showByName(String name)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的查询信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回符合该商品名称的商品信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.showByType</td>
<td>语法</td>
<td>public ArrayList<CommodityVO> showByType(String type)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的查询信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回符合该商品类型的商品信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.showSort</td>
<td>语法</td>
<td>public ArrayList<CommodityTypeVO> showSort()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的查询信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有商品分类信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.addCommodityBill</td>
<td>语法</td>
<td>public ResultMessage addCommodityBill(CommodityBillVO vo) throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加报损报溢单信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.showCommodityBill</td>
<td>语法</td>
<td>public ArrayList<CommodityBillVO> showCommodityBill() throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有报损报溢单</td>
</tr>
<tr>
<td rowspan="3">Commodity.getCommodityBill</td>
<td>语法</td>
<td>public ArrayList<CommodityBillVO> getCommodityBill(String startDate,String endDate) throws RemoteException, ParseException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回该时段内所有报损报溢单</td>
</tr>
<tr>
<td colspan="4">需要的服务（需接口）</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
</tr>
<tr>
<td colspan="2">RemoteHelper.getClassificationDataService()</td>
<td colspan="2">得到Classification数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">RemoteHelper.getGoodsDataService()</td>
<td colspan="2">得到Goods数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">RemoteHelper.getCommodityDataService()</td>
<td colspan="2">得到Commodity数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">ClassificationDataService.insertSort(ClassificationPO po)</td>
<td colspan="2">插入ClassificationPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">ClassificationDataService.deleteSort(String name)</td>
<td colspan="2">删除ClassificationPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">ClassificationDataService.modifySort(ClassificationPO po)</td>
<td colspan="2">修改ClassificationPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">GoodsDataService.insertGoods(GoodsPO po)</td>
<td colspan="2">插入GoodsPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">GoodsDataService.deleteGoods(String name)</td>
<td colspan="2">删除GoodsPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">GoodsDataService.modifyGoods(GoodsPO po)</td>
<td colspan="2">修改GoodsPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">GoodsDataService.showGoods()</td>
<td colspan="2">得到所有GoodsPO持久化对象</td>
</tr>
<tr>
<td colspan="2">GoodsDataService.searchGoodsByName(String name)</td>
<td colspan="2">根据商品名称查找GoodsPO持久化对象</td>
</tr>
<tr>
<td colspan="2">GoodsDataService.searchGoodsByClassification(String type)</td>
<td colspan="2">根据商品类型查找GoodsPO持久化对象</td>
</tr>
<tr>
<td colspan="2">ClassificationDataService.showSort()</td>
<td colspan="2">得到所有ClassificationPO持久化对象 </td>
</tr>
<tr>
<td colspan="2">CommodityDataService.addCommodityBill(CommodityBillPO po)</td>
<td colspan="2">添加CommodityBillPO单一持久化对象 </td>
</tr>
<tr>
<td colspan="2">CommodityDataService.showCommodityBill()</td>
<td colspan="2">得到所有CommodityBillPO持久化对象 </td>
</tr>
<tr>
<td colspan="2">CommodityDataService.getCommodityBill(String startDate,String endDate)</td>
<td colspan="2">得到所有满足时间段信息的CommodityBillPO持久化对象 </td>
</tr>
</table>

##### 4.2.2.4 动态模型
库存管理的动态模型如图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/commodity%20sequence.png)  

##### 4.2.2.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.3 clientbl模块 
##### 4.2.3.1 模块概述
clientbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。  
clientbl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。
##### 4.2.3.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.clientblservice接口。业务逻辑层和数据层之间添加dataservice.clientdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了clientController，这样clientController会将对用户的业务逻辑处理委托给client对象。clientPO是作为系统用户信息的持久化对象被添加到设计模型里去的。  
clientbl的设计如下图所示
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E5%9B%BE/clientbl%E6%A8%A1%E5%9D%97%E5%90%84%E4%B8%AA%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)
##### 4.2.4.3 内部类的接口规范
#####  ClientController模块的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF"> 
<tr bordercolor="#FFFFFF"> 
<th colspan="3"> 提供的服务（供接口）</th>
<tr>
<td rowspan="3">ClientController.add</td>
<td>语法</td>
<td>public ResultMessage add(ClientVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户选择新建客户</td>
</tr><tr>
<td>后置条件</td>
<td>调用Client领域的add方法</td>
</tr><tr>
<td rowspan="3">ClientController.findbyID</td>
<td>语法</td>
<td>public ClientVO findbyID(String ID)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户ID输入合法</td>
</tr><tr>
<td>后置条件</td>
<td>调用Client领域的findbyID方法</td>
</tr><tr>
<td rowspan="3">ClientController.findbyName</td>
<td>语法</td>
<td>public ClientVO findbyName(String name)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户名称输入合法</td>
</tr><tr>
<td>后置条件</td>
<td>调用Client领域的findbyName方法</td>
</tr><tr>
<td rowspan="3">ClientController.findbyString</td>
<td>语法</td>
<td>public ArrayList<ClientVO> findbyString(String str)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>关键字输入合法</td>
</tr><tr>
<td>后置条件</td>
<td>调用Client领域的findbyString方法</td>
</tr><tr>
<td rowspan="3">ClientController.update</td>
<td>语法</td>
<td>public ResultMessage update(ClientVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户信息输入符合规范</td>
</tr><tr>
<td>后置条件</td>
<td>调用Client领域的update方法</td>
</tr><tr>
<td rowspan="3">ClientController.delete</td>
<td>语法</td>
<td>public ResultMessage delete(ClientVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户编号输入正确</td>
</tr><tr>
<td>后置条件</td>
<td>调用Client领域的delete方法</td>
</tr><tr>
<td rowspan="3">ClientController.show</td>
<td>语法</td>
<td>public ArrayList<ClientVO> show()throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>无</td>
</tr><tr>
<td>后置条件</td>
<td>调用Client领域的show方法</td>
</tr>
<th colspan="3">需要的服务（需接口）</th><tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<td colspan="2">Client.add(ClientVO vo)</td>
<td colspan="2">新建一个客户信息</td>
</tr>
<tr>
<td colspan="2">Client.findbyID(String ID)</td>
<td colspan="2">通过用户编号查找一个用户的信息</td>
</tr>
<tr>
<td colspan="2">Client.findbyName(String name)</td>
<td colspan="2">通过用户名称查找一个用户的信息</td>
</tr>
<tr>
<td colspan="2">Client.findbyString(String str)</td>
<td colspan="2">通过关键字查找一个用户的信息</td>
</tr>
<tr>
<td colspan="2">Client.update(ClientVO vo)</td>
<td colspan="2">修改一个客户的信息</td>
</tr>
<tr>
<td colspan="2">Client.delete(ClientVO vo)</td>
<td colspan="2">删除一个客户的信息</td>
</tr>
<tr>
<td colspan="2">Client.show()</td>
<td colspan="2">返回所有客户的信息</td>
</tr>
</table>

#####  Client模块的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF"> 
<tr bordercolor="#FFFFFF"> 
<th colspan="3"> 提供的服务（供接口）</th>
<tr>
<td rowspan="3">Client.add</td>
<td>语法</td>
<td>public ResultMessage add(ClientVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户选择新建客户且客户信息输入符合规范</td>
</tr><tr>
<td>后置条件</td>
<td>系统保存并持久化客户信息</td>
</tr><tr>
<td rowspan="3">Client.findbyID</td>
<td>语法</td>
<td>public ClientVO findbyID(String ID)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户ID输入合法</td>
</tr><tr>
<td>后置条件</td>
<td>系统返回查询结果（客户信息或客户不存在）</td>
</tr><tr>
<td rowspan="3">Client.findbyName</td>
<td>语法</td>
<td>public ClientVO findbyName(String name)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户名称输入合法</td>
</tr><tr>
<td>后置条件</td>
<td>系统返回查询结果（客户信息或客户不存在）</td>
</tr><tr>
<td rowspan="3">Client.findbyString</td>
<td>语法</td>
<td>public ArrayList<ClientVO> findbyString(String str)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>关键字输入合法</td>
</tr><tr>
<td>后置条件</td>
<td>系统返回查询结果（客户信息或客户不存在）</td>
</tr><tr>
<td rowspan="3">Client.update</td>
<td>语法</td>
<td>public ResultMessage update(ClientVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户信息输入符合规范</td>
</tr><tr>
<td>后置条件</td>
<td>系统保存并持久化客户信息</td>
</tr><tr>
<td rowspan="3">Client.delete</td>
<td>语法</td>
<td>public ResultMessage delete(ClientVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>客户编号输入正确</td>
</tr><tr>
<td>后置条件</td>
<td>系统删除客户信息</td>
</tr><tr>
<td rowspan="3">Client.show</td>
<td>语法</td>
<td>public ArrayList<ClientVO> show()throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>无</td>
</tr><tr>
<td>后置条件</td>
<td>系统返回所有客户信息</td>
</tr>
<th colspan="3">需要的服务（需接口）</th><tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
</tr>
<td colspan="2">RemoteHelper.getClientDataService()</td>
<td colspan="2">得到Client数据的服务的引用</td>
</tr>
<td colspan="2">ClientDataService.addClient(ClientPO po)</td>
<td colspan="2">新建一个客户信息</td>
</tr>
<tr>
<td colspan="2">ClientDataService.findClientById(int ID)</td>
<td colspan="2">通过用户编号查找一个用户的信息</td>
</tr>
<tr>
<td colspan="2">ClientDataService.findClientByName(String name)</td>
<td colspan="2">通过用户名称查找一个用户的信息</td>
</tr>
<tr>
<td colspan="2">ClientDataService.findClientByKeyword(String str)</td>
<td colspan="2">通过关键字查找一个用户的信息</td>
</tr>
<tr>
<td colspan="2">ClientDataService.updateClient(ClientPO po)</td>
<td colspan="2">修改一个客户的信息</td>
</tr>
<tr>
<td colspan="2">ClientDataService.deleteClient(String name)</td>
<td colspan="2">删除一个客户的信息</td>
</tr>
<tr>
<td colspan="2">ClientDataService.showClient()</td>
<td colspan="2">返回所有客户的信息</td>
</tr>
</table>

##### 4.2.3.4 动态模型
客户管理的动态模型如图所示。  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/%E5%AE%A2%E6%88%B7%E7%AE%A1%E7%90%86%E7%9A%84%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)  

##### 4.2.3.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

####  4.2.4 salesbl模块
##### 4.2.4.1 模块概述  
Sales模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。    
Sales模块的职责和接口参见软件系统结构描述文档内对该模块的描述。

##### 4.2.4.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.Salesblservice接口。业务逻辑层和数据层之间添加dataservice.Salesdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了SalesController，这样SalesController会将对用户的业务逻辑处理委托给Sales对象。SalesPO是作为系统用户信息的持久化对象被添加到设计模型里去的。

salesbl的设计如下图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E5%9B%BE/Salesbl%E6%A8%A1%E5%9D%97%E5%90%84%E4%B8%AA%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)  

##### 4.2.4.3 内部类的接口规范
##### salesController的接口规范

<table width="100%" border="0" bordercolor="#FFFFFF"> 
<tr bordercolor="#FFFFFF"> 
<th colspan="3"> 提供的服务（供接口）</th>
<tr>
<td rowspan="3">SalesController.addSales</td>
<td>语法</td>
<td>public ResultMessage addSales(SalesVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>用户选择新建销售单</td>
</tr><tr>
<td>后置条件</td>
<td>调用Sales领域对象的addSales方法</td>
</tr><tr>
<td rowspan="3">SalesController.addRefunds</td>
<td>语法</td>
<td>public ResultMessage addRefunds(SalesVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>系统选择新建销售退货单</td>
</tr><tr>
<td>后置条件</td>
<td>调用Sales领域对象的addRefunds方法</td>
</tr><tr>
<td rowspan="3">SalesController.checkSales</td>
<td>语法</td>
<td>public ResultMessage checkSales(SalesVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户确认制定完成且输入符合规范</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该销售类单据进行审批</td>
</tr><tr>
<td rowspan="3">SalesController.reverseSales</td>
<td>语法</td>
<td>public ResultMessage reverseSales(SalesVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该销售类单据进行红冲操作</td>
</tr><tr>

<th colspan="3">需要的服务（需接口）</th><tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<td colspan="2">Sales.addSales(SalesVO vo)</td>
<td colspan="2">新建一个销售单对象</td>
</tr>
<tr>
<td colspan="2">Sales.addRefunds(SalesVO vo)</td>
<td colspan="2">新建一个销售退货单对象</td>
</tr>
<tr>
<td colspan="2">Sales.checkSales(SalesVO vo)</td>
<td colspan="2">对PO记录进行审批</td>
</tr>
<tr>
<td colspan="2">Sales.reverseSales(SalesVO vo)</td>
<td colspan="2">对PO记录进行红冲</td>
</tr>
</table>

##### Sales模块的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF"> 
<tr bordercolor="#FFFFFF"> 
<th colspan="3"> 提供的服务（供接口）</th>
<tr>
<td rowspan="3">Sales.addSales</td>
<td>语法</td>
<td>public ResultMessage addSales(SalesVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>输入信息符合销售单的标准(客户、业务员、操作员、仓库、数量、单价、初步折让金额及备注)</td>
</tr><tr>
<td>后置条件</td>
<td>系统增加销售单并持久化该销售单信息</td>
</tr><tr>
<td rowspan="3">Sales.addRefunds</td>
<td>语法</td>
<td>public ResultMessage addRefunds(SalesVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>输入信息符合销售退货单的标准(客户、业务员、操作员、数量、单价、初步折让金额及备注)</td>
</tr><tr>
<td>后置条件</td>
<td>系统增加销售退货单并持久化该销售退货单信息</td>
</tr><tr>
<td rowspan="3">Sales.checkSales</td>
<td>语法</td>
<td>public ResultMessage checkSales(SalesVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>无</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该销售类单据进行审批</td>
</tr><tr>
<td rowspan="3">Sales.reverseSales</td>
<td>语法</td>
<td>public ResultMessage reverseSales(SalesVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该销售类单据进行红冲操作</td>
</tr>
<th colspan="3">需要的服务（需接口）</th><tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<tr>
<td colspan="2">RemoteHelper.getSalesBillDataService()</td>
<td colspan="2">得到SalesBill数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">SalesBillDataService.addSaleBill(SalesBillPO po)</td>
<td colspan="2">插入SalesBillPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">SalesBillDataService.checkSaleBill(SalesBillPO po)</td>
<td colspan="2">修改SalesBillPO单一持久化对象的审批信息</td>
</tr>
<tr>
<td colspan="2">SalesBillDataService.reverseSaleBill(SalesBillPO po)</td>
<td colspan="2">生成一个其余相同仅把数量取负的SalesBillPO单一持久化对象</td>
</tr>

</table>

#####  4.2.4.4 业务逻辑层的动态模型
制定销售单/销售退货单的系统顺序图如图所示。  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/%E9%94%80%E5%94%AE%E5%8D%95%E5%88%B6%E5%AE%9A%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)

##### 4.2.4.5 业务逻辑层的设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.5 purchasebl模块  

##### 4.2.5.1 模块概述
purchase模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。  
purchase模块的职责和接口参见软件系统结构描述文档内对该模块的描述。

##### 4.2.5.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.purchaseblservice接口。业务逻辑层和数据层之间添加dataservice.purchasedataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了purchaseController，这样purchaseController会将对用户的业务逻辑处理委托给purchase对象。purchasePO是作为系统用户信息的持久化对象被添加到设计模型里去的。  

purchasebl的设计如下图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E5%9B%BE/purchasebl%E6%A8%A1%E5%9D%97%E5%90%84%E4%B8%AA%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)

##### 4.2.5.3 内部类的接口规范
#####  PurchaseController模块的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF"> 
<tr bordercolor="#FFFFFF"> 
<th colspan="3"> 提供的服务（供接口）</th>
<tr>
<td rowspan="3">PurchaseController.addPurchase</td>
<td>语法</td>
<td>public ResultMessage addPurchase(PurchaseVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>用户选择新建进货单对象</td>
</tr><tr>
<td>后置条件</td>
<td>调用Purchase领域的addPurchase方法</td>
</tr><tr>
<td rowspan="3">PurchaseController.addRefunds</td>
<td>语法</td>
<td>public ResultMessage addRefunds(PurchaseVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>用户选择新建进货退货单对象</td>
</tr><tr>
<td>后置条件</td>
<td>调用Purchase领域的addRefunds方法</td>
</tr><tr>
<td rowspan="3">PurchaseController.checkPurchase</td>
<td>语法</td>
<td>public ResultMessage checkPurchase(PurchaseVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户确认制定完成且输入符合规范</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该进货类单据进行审批</td>
</tr><tr>
<td rowspan="3">PurchaseController.reversePurchase</td>
<td>语法</td>
<td>public ResultMessage reversePurchase(PurchaseVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该进货类单据进行红冲操作</td>
</tr>
<th colspan="3">需要的服务（需接口）</th><tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<td colspan="2">Purchase.addPurchase(PurchaseVO vo)</td>
<td colspan="2">新建一个进货单对象</td>
</tr>
<tr>
<td colspan="2">Purchase.addRefunds(PurchaseVO vo)</td>
<td colspan="2">新建一个进货退货单对象</td>
</tr>
<tr>
<td colspan="2">Purchase.checkPurchase(PurchaseVO vo)</td>
<td colspan="2">对PO记录进行审批</td>
</tr>
<tr>
<td colspan="2">Purchase.reversePurchase(PurchaseVO vo)</td>
<td colspan="2">对PO记录进行红冲</td>
</tr>
</table>
#####  Purchase模块的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF"> 
<tr bordercolor="#FFFFFF"> 
<th colspan="3"> 提供的服务（供接口）</th>
<tr>
<td rowspan="3">Purchase.addPurchase</td>
<td>语法</td>
<td>public ResultMessage addPurchase(PurchaseVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>输入信息符合进货单的标准(客户、操作员、仓库、数量、单价及备注)</td>
</tr><tr>
<td>后置条件</td>
<td>系统增加进货单并持久化该进货单信息</td>
</tr><tr>
<td rowspan="3">Purchase.addRefunds</td>
<td>语法</td>
<td>public ResultMessage addRefunds(PurchaseVO vo)</td>
</tr><tr>
<td>前置条件</td>
<td>输入信息符合进货退货单的标准(客户、操作员、仓库、数量、单价及备注)</td>
</tr><tr>
<td>后置条件</td>
<td>系统增加进货退货单并持久化该进货退货单信息</td>
</tr><tr>
<td rowspan="3">Purchase.checkPurchase</td>
<td>语法</td>
<td>public ResultMessage checkPurchase(PurchaseVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>无</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该进货类单据进行审批</td>
</tr><tr>
<td rowspan="3">Purchase.reversePurchase</td>
<td>语法</td>
<td>public ResultMessage reversePurchase(PurchaseVO vo)throws RemoteException</td>
</tr><tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr><tr>
<td>后置条件</td>
<td>系统对该进货类单据进行红冲</td>
</tr>
<th colspan="3">需要的服务（需接口）</th><tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<td colspan="2">RemoteHelper.getPurchaseBillDataService()</td>
<td colspan="2">得到PurchaseBill数据的服务的引用</td>
</tr>
</tr>
<td colspan="2">PurchaseBillDataService.addPurchaseBill(PurchaseBillPO po)</td>
<td colspan="2">插入PurchaseBillPO单一持久化对象</td>
</tr>
</tr>
<td colspan="2">PurchaseBillDataService.checkPurchaseBill(PurchaseBillPO po)</td>
<td colspan="2">修改PurchaseBillPO单一持久化对象的审批信息</td>
</tr>
<tr>
<td colspan="2">PurchaseBillDataService.reversePurchaseBill(PurchaseBillPO po)</td>
<td colspan="2">生成一个其余相同仅把数量取负的PurchaseBillPO单一持久化对象</td>
</tr>
</table>

##### 4.2.5.4 动态模型
制定进货单/进货退货单的系统顺序图如图所示。  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/%E8%BF%9B%E8%B4%A7%E5%8D%95%E5%88%B6%E5%AE%9A%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)  

##### 4.2.5.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.6 accountbl模块
##### 4.2.6.1 模块概述
accountbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。
accountbl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。

##### 4.2.6.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.accountblservice接口。业务逻辑层和数据层之间添加dataservice.accountbldataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了accountController，这样accountController会将对用户的业务逻辑处理委托给account对象。accountPO是作为系统用户信息的持久化对象被添加到设计模型里去的。  
accountbl的设计如下图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/account%20bl.png)

##### 4.2.6.3 内部类的接口规范
##### controller类的接口规范

<table>
<tr>
<td colspan="4">提供的接口(供接口)</td>
</tr>
<tr>
<td rowspan="3">AccountController.add</td>
<td>语法</td>
<td>public ResultMessage add(AccountVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加账户并持久化该账户信息</td>
</tr>
<tr>
<td rowspan="3">AccountController.delete</td>
<td>语法</td>
<td>public ResultMessage delete(AccountVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账户存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化删除该账户信息</td>
</tr>
<tr>
<td rowspan="3">AccountController.update</td>
<td>语法</td>
<td>public ResultMessage update(AccountVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化更新该账户信息</td>
</tr>
<tr>
<td rowspan="3">AccountController.findById</td>
<td>语法</td>
<td>public ArrayList<AccountVO> findById(String id)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合查找条件的账户信息</td>
</tr>
<tr>
<td rowspan="3">AccountController.findByName</td>
<td>语法</td>
<td>public ArrayList<AccountVO> findByName(String name)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合查找条件的账户信息</td>
</tr>
<tr>
<td rowspan="3">AccountController.show</td>
<td>语法</td>
<td>public ArrayList<AccountVO> show()</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有账户信息</td>
</tr>
<tr>
<td colspan="4">需要的服务(需接口)</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<tr>
<td colspan="2">AccountController.add</td>
<td colspan="2">系统增加账户信息</td>
</tr>
<tr>
<td colspan="2">AccountController.delete</td>
<td colspan="2">系统删除账户信息</td>
</tr>
<tr>
<td colspan="2">AccountController.update</td>
<td colspan="2">系统修改账户信息</td>
</tr>
<tr>
<td colspan="2">AccountController.findById</td>
<td colspan="2">系统根据账户ID返回账户信息</td>
</tr>
<tr>
<td colspan="2">AccountController.findByName</td>
<td colspan="2">系统根据账户名返回账户信息</td>
</tr>
<tr>
<td colspan="2">AccountController.show</td>
<td colspan="2">系统返回所有账户信息</td>
</tr>
</table>

##### domain类的接口规范

<table>
<tr>
<td colspan="4">提供的接口(供接口)</td>
</tr>
<tr>
<td rowspan="3">Account.add</td>
<td>语法</td>
<td>public ResultMessage add(AccountVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加账户并持久化该账户信息</td>
</tr>
<tr>
<td rowspan="3">Account.delete</td>
<td>语法</td>
<td>public ResultMessage delete(AccountVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账户存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化删除该账户信息</td>
</tr>
<tr>
<td rowspan="3">Account.update</td>
<td>语法</td>
<td>public ResultMessage update(AccountVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化更新该账户信息</td>
</tr>
<tr>
<td rowspan="3">Account.findById</td>
<td>语法</td>
<td>public ArrayList<AccountVO> findById(String id)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合查找条件的账户信息</td>
</tr>
<tr>
<td rowspan="3">Account.findByName</td>
<td>语法</td>
<td>public ArrayList<AccountVO> findByName(String name)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合查找条件的账户信息</td>
</tr>
<tr>
<td rowspan="3">Account.show</td>
<td>语法</td>
<td>public ArrayList<AccountVO> show()</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有账户信息</td>
</tr>
<tr>
<td colspan="4">需要的服务(需接口)</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<tr>
<td colspan="2">DataFactory.getAccountData()</td>
<td colspan="2">得到Account数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">AccountDataService.insert(AccountPO po)</td>
<td colspan="2">插入AccountPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">AccountDataService.delete(AccountPO po)</td>
<td colspan="2">删除AccountPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">AccountDataService.update(AccountPO po)</td>
<td colspan="2">修改AccountPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">AccountDataService.findById(String id)</td>
<td colspan="2">返回相应账户id的PO记录</td>
</tr>
<tr>
<td colspan="2">AccountDataService.findByName(String name)</td>
<td colspan="2">返回相应账户名称的PO记录</td>
</tr>
<tr>
<td colspan="2">AccountDataService.show()</td>
<td colspan="2">返回所有账户信息的PO记录</td>
</tr>
</table>



##### 4.2.6.4 动态模型
账户管理的系统顺序图如图所示。  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/account%20sequence.png)  

##### 4.2.6.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.7 paymentbl模块
##### 4.2.7.1 模块概述
paymentbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。  
paymentbl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。
##### 4.2.7.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间增加了businesslogicservice.paymentblservice接口。业务逻辑层和数据层之间添加dataservice.paymentdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了paymentController，这样paymentController会将对用户的业务逻辑处理委托给Sales对象。paymentPO是作为系统用户信息的持久化对象被添加到设计模型里去的。
paymentbl的设计如下图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/payment%20bl.png)  

##### 4.2.7.3 内部类的接口规范
##### controller类的接口规范

<table>
<tr>
<td colspan="4">提供的接口(供接口)</td>
</tr>
<tr>
<td rowspan="3">PaymentController.addReceipt</td>
<td>语法</td>
<td>public ResultMessage addReceipt(ReceiptVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入信息符合收款单的标准(单据编号，客户，操作员，转账列表，总额汇总)</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加收款单并持久化该收款单信息</td>
</tr>
<tr>
<td rowspan="3">PaymentController.addPayBill</td>
<td>语法</td>
<td>public ResultMessage addPayBill(PaymentVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入信息符合付款单的标准(单据编号，客户，操作员，转账列表，总额汇总)</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加付款单并持久化该付款单信息</td>
</tr>
<tr>
<td rowspan="3">PaymentController.checkReceipt</td>
<td>语法</td>
<td>public ResultMessage checkReceipt(ReceiptVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对收款单进行审批</td>
</tr>
<tr>
<td rowspan="3">PaymentController.checkPayBill</td>
<td>语法</td>
<td>public ResultMessage checkPayBill(PaymentVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对付款单进行审批</td>
</tr>
<tr>
<td rowspan="3">PaymentController.reverseReceipt</td>
<td>语法</td>
<td>public ResultMessage reverseReceipt(ReceiptVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对收款单进行红冲操作</td>
</tr>
<tr>
<td rowspan="3">PaymentController.reversePayBill</td>
<td>语法</td>
<td>public ResultMessage reversePayBill(PaymentVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对付款单进行红冲操作</td>
</tr>
<tr>
<td colspan="4">需要的服务(需接口)</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<tr>
<td colspan="2">Payment.addReceipt</td>
<td colspan="2">系统生成收款单</td>
</tr>
<tr>
<td colspan="2">Payment.addPayBill</td>
<td colspan="2">系统生成付款单</td>
</tr>
<tr>
<td colspan="2">Payment.checkReceipt</td>
<td colspan="2">系统修改收款单审批信息</td>
</tr>
<tr>
<td colspan="2">Payment.checkPayBill</td>
<td colspan="2">系统修改付款单审批信息</td>
</tr>
<tr>
<td colspan="2">Payment.reverseReceipt</td>
<td colspan="2">系统对收款单进行红冲</td>
</tr>
<tr>
<td colspan="2">Payment.reversePayBill</td>
<td colspan="2">系统对付款单进行红冲</td>
</tr>
</table>

##### domain类的接口规范

<table>
<tr>
<td colspan="4">提供的接口(供接口)</td>
</tr>
<tr>
<td rowspan="3">Payment.addReceipt</td>
<td>语法</td>
<td>public ResultMessage addReceipt(ReceiptVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入信息符合收款单的标准(单据编号，客户，操作员，转账列表，总额汇总)</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加收款单并持久化该收款单信息</td>
</tr>
<tr>
<td rowspan="3">Payment.addPayBill</td>
<td>语法</td>
<td>public ResultMessage addPayBill(PaymentVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入信息符合付款单的标准(单据编号，客户，操作员，转账列表，总额汇总)</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统增加付款单并持久化该付款单信息</td>
</tr>
<tr>
<td rowspan="3">Payment.checkReceipt</td>
<td>语法</td>
<td>public ResultMessage checkReceipt(RceiptVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对收款单进行审批</td>
</tr>
<tr>
<td rowspan="3">Payment.checkPayBill</td>
<td>语法</td>
<td>public ResultMessage checkPayBill(PaymentVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对付款单进行审批</td>
</tr>
<tr>
<td rowspan="3">Payment.reverseReceipt</td>
<td>语法</td>
<td>public ResultMessage reverseReceipt(RceiptVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对收款单进行红冲操作</td>
</tr>
<tr>
<td rowspan="3">Payment.reversePayBill</td>
<td>语法</td>
<td>public ResultMessage reversePayBill(PaymentVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>用户身份满足权限</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统对付款单进行红冲操作</td>
</tr>

<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<tr>
<td colspan="2">RemoteHelper.getCollectionDataService()</td>
<td colspan="2">得到Collection数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">RemoteHelper.getPaymentDataService()</td>
<td colspan="2">得到Payment数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">CollectionDataService.addCash(CollectionPO po)</td>
<td colspan="2">插入CollectionPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">PaymentDataService.addPaymentBill(PaymentPO po)</td>
<td colspan="2">插入PaymentPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">CollectionDataService.checkCollection(CollectionPO po)</td>
<td colspan="2">修改CollectionPO单一持久化对象的审批信息</td>
</tr>
<tr>
<td colspan="2">PaymentDataService.checkPaymentBill(PaymentPO po)</td>
<td colspan="2">修改PaymentPO单一持久化对象的审批信息</td>
</tr>
<tr>
<td colspan="2">CollectionDataService.reverseCollectionBill(CollectionPO po)</td>
<td colspan="2">生成一个其余相同仅把数量取负的CollectionPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">PaymentDataService.reversePaymentBill(PaymentPO po)</td>
<td colspan="2">生成一个其余相同仅把数量取负的PaymentPO单一持久化对象</td>
</tr>
</table>

##### 4.2.7.4 动态模型
制定收/付款单的系统顺序图如图所示。
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/payment%20sequence.png)  
##### 4.2.7.5 设计原理  
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。


#### 4.2.8 billbl模块
##### 4.2.8.1 模块概述
billbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。  
billbl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。
##### 4.2.8.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间businesslogicservice.billblservice接口。业务逻辑层和数据层之间添加dataservice.billdataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了billController，这样billController会将对用户的业务逻辑处理委托给bill对象。purchasePO是作为系统用户信息的持久化对象被添加到设计模型里去的。  
billbl的设计如下图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/bill%20bl.png)
##### 4.2.8.3 内部接口规范

##### controller类的接口规范

<table>
<tr>
<td colspan="4">提供的接口(供接口)</td>
</tr>
<tr>
<td rowspan="3">BillController.initial</td>
<td>语法</td>
<td>public ResultMessage initial(BillVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的期初信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化保存该期初账目信息</td>
</tr>
<tr>
<td rowspan="3">BillController.show</td>
<td>语法</td>
<td>public ArrayList<BillVO> show()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有账目信息</td>
</tr>
<tr>
<td rowspan="3">BillController.showInitial</td>
<td>语法</td>
<td>public ArrayList<BillVO> showInitial()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回期初账目信息</td>
</tr>
<tr>
<td rowspan="3">BillController.update</td>
<td>语法</td>
<td>public ResultMessage update(BillVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更新账目信息</td>
</tr>
<tr>
<td rowspan="3">BillController.delete</td>
<td>语法</td>
<td>public ResultMessage delete(BillVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账目存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除账目信息</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<tr>
<td colspan="2">BillController.add</td>
<td colspan="2">系统添加账目信息</td>
</tr>
<tr>
<td colspan="2">BillController.update</td>
<td colspan="2">系统更新账目信息</td>
</tr>
<tr>
<td colspan="2">BillController.delete</td>
<td colspan="2">系统删除账目信息</td>
</tr>
<tr>
<td colspan="2">BillController.show</td>
<td colspan="2">系统返回所有账目信息</td>
</tr>
<tr>
<td colspan="2">BillController.showInitial</td>
<td colspan="2">系统返回期初账目信息</td>
</tr>
</table>

##### domain类的接口规范

<table>
<tr>
<td colspan="4">提供的接口(供接口)</td>
</tr>
<tr>
<td rowspan="3">Bill.initial</td>
<td>语法</td>
<td>public ResultMessage initial(BillVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的期初信息符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化保存该期初账目信息</td>
</tr>
<tr>
<td rowspan="3">Bill.show</td>
<td>语法</td>
<td>public ArrayList<BillVO> show()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有账目信息</td>
</tr>
<tr>
<td rowspan="3">Bill.showInitial</td>
<td>语法</td>
<td>public ArrayList<BillVO> showInitial()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回期初账目信息</td>
</tr>
<tr>
<td rowspan="3">Bill.update</td>
<td>语法</td>
<td>public ResultMessage update(BillVO vo)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更新账目信息</td>
</tr>
<tr>
<td rowspan="3">Bill.delete</td>
<td>语法</td>
<td>public ResultMessage delete(BillVO vo)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该账目存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除账目信息</td>
</tr>
<tr>
<td colspan="2">服务名</td>
<td colspan="2">服务</td>
</tr>
<tr>
<td colspan="2">DataFactory.getBillData()</td>
<td colspan="2">得到Payment数据的服务的引用</td>
</tr>
<tr>
<td colspan="2">BillDataService.insert(PaymentPO po)</td>
<td colspan="2">插入BillPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">BillDataService.update(BillPO po)</td>
<td colspan="2">修改PaymentPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">BillDataService.delete(BillPO po)</td>
<td colspan="2">删除PaymentPO单一持久化对象</td>
</tr>
<tr>
<td colspan="2">BillDataService.show()</td>
<td colspan="2">系统返回所有账目PO记录</td>
</tr>
<tr>
<td colspan="2">BillDataService.showInitial()</td>
<td colspan="2">系统返回所有期初账目PO记录</td>
</tr>
</table>

##### 4.2.8.4 动态模型
账目管理的系统顺序图如图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/bill%20sequence.png)  
##### 4.2.8.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.9 promotionbl模块
##### 4.2.9.1 模块概述 
promotionbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。  
promotionbl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。
##### 4.2.9.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间添加businesslogicservice.promotionblservice接口。业务逻辑层和数据层之间添加dataservice.promotiondataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了promotionController，这样promotionController会将对用户的业务逻辑处理委托给promotion对象。promotionPO是作为系统用户信息的持久化对象被添加到设计模型里去的。  
promotionbl的设计如图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/promotion.png)
##### 4.2.9.3 内部类的接口规范

##### 	Controller类的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">PromotionController.add</td>
<td>语法</td>
<td>public ResultMessage add(StrategyVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的策略信息合法</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统添加并持久化存储策略信息</td>
</tr>
<tr>
<td rowspan="3">PromotionController.delete</td>
<td>语法</td>
<td>public ResultMessage delete(String StrategyNum);</td>
</tr>
<tr>
<td>前置条件</td>
<td>系统中存在编号符合的策略</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化删除该策略</td>
</tr>
<tr>
<td rowspan="3">PromotionController.update</td>
<td>语法</td>
<td>public ResultMessage update(StrategyVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>更新的信息合法</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化更新策略信息</td>
</tr>
<tr>
<td rowspan="3">PromotionController.show</td>
<td>语法</td>
<td>public ArrayList<StrategyVO> show();</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有促销策略信息</td>
</tr>
<tr>
<td rowspan="3">PromotionController.addGiftReceipt</td>
<td>语法</td>
<td>public ResultMessage addGiftReceipt(String rank, Double totalPrice);</td>
</tr>
<tr>
<td>前置条件</td>
<td>客户的级别或商品总价达到赠品条件</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化存储库存赠送信息</td>
</tr></table>

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="2">需要的服务（需接口）</td>
</tr>
<tr>
<td>服务名</td>
<td>服务</td>
</tr>
<tr>
<td>Promotion.add</td>
<td>添加促销策略</td>
</tr>
<tr>
<td>Promotion.delete</td>
<td>删除促销策略</td>
</tr>
<tr>
<td>Promotion.update</td>
<td>更新促销策略</td>
</tr>
<tr>
<td>Promotion.show</td>
<td>显示当前促销策略</td>
</tr>
<tr>
<td>Promotion.addGiftReceipt</td>
<td>添加库存赠送单</td>
</tr></table>

##### 	Domain类的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">Promotion.add</td>
<td>语法</td>
<td>public ResultMessage add(StrategyVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入的策略信息合法</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统添加并持久化存储策略信息</td>
</tr>
<tr>
<td rowspan="3">Promotion.delete</td>
<td>语法</td>
<td>public ResultMessage delete(String StrategyNum);</td>
</tr>
<tr>
<td>前置条件</td>
<td>系统中存在编号符合的策略</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化删除该策略</td>
</tr>
<tr>
<td rowspan="3">Promotion.update</td>
<td>语法</td>
<td>public ResultMessage update(StrategyVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>更新的信息合法</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化更新策略信息</td>
</tr>
<tr>
<td rowspan="3">Promotion.show</td>
<td>语法</td>
<td>public ArrayList<StrategyVO> show();</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有促销策略信息</td>
</tr>
<tr>
<td rowspan="3">Promotion.addGiftReceipt</td>
<td>语法</td>
<td>public ResultMessage addGiftReceipt(String rank, Double totalPrice);</td>
</tr>
<tr>
<td>前置条件</td>
<td>客户的级别或商品总价达到赠品条件</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化存储库存赠送信息</td>
</tr></table>

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="2">需要的服务（需接口）</td>
</tr>
<tr>
<td>服务名</td>
<td>服务</td>
</tr>
<tr>
<td>DataFactory.getPromotionData()</td>
<td>得到Promotion数据的服务的引用</td>
</tr>
<tr>
<td>PromotionDataService.add(StrategyPO po)</td>
<td>添加StrategyPO单一持久化对象</td>
</tr>
<tr>
<td>PromotionDataService.delete(String StrategyNum)</td>
<td>删除StrategyPO单一持久化对象</td>
</tr>
<tr>
<td>PromotionDataService.update(StrategyPO po)</td>
<td>更新StrategyPO单一持久化对象</td>
</tr>
<tr>
<td>PromotionDataService.show()</td>
<td>返回所有StrategyPO单一持久化对象</td>
</tr>
<tr>
<td>PromotionDataService.addGiftReceipt(String rank, Double totalPrice)</td>
<td>添加GiftReceiptPO单一持久化对象</td>
</tr></table>!


##### 4.2.9.4 动态模型
促销策略的系统顺序图如图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/promotion%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)  

##### 4.2.9.5 设计原理

利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.10 tablebl模块

##### 4.2.10.1 模块概述
tablebl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。
tablebl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。

##### 4.2.10.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间添加businesslogicservice.tableblservice接口。业务逻辑层和数据层之间添加dataservice.tabledataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了tableController，这样tableController会将对用户的业务逻辑处理委托给table对象。tablePO是作为系统用户信息的持久化对象被添加到设计模型里去的。

tablebl的设计如下图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/table.png)

##### 4.2.10.3 内部类的接口规范
##### 	Controller类的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">TableController.viewSaleTable</td>
<td>语法</td>
<td>public SaleTableVO viewSaleTable(String time, String goodsName, String client, String salesman, String warehouse);</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统根据输入的时间区间、商品名、客户、业务员、仓库查找销售出货单据，根据销售单据的时间（精确到天），商品名，型号，数量，单价，总额生成销售明细表并返回</td>
</tr>
<tr>
<td rowspan="3">TableController.viewManagementProcess</td>
<td>语法</td>
<td>public ArrayList<ReceiptVO> viewManagementProcess(String time, String receiptType, String client, String salesman, String warehouse);</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统根据输入的时间区间、单据类型、客户、业务员、仓库查找单据，并返回单据</td>
</tr>
<tr>
<td rowspan="3">TableController.viewManagementSituation</td>
<td>语法</td>
<td>public SituationTableVO viewManagementSituation(String time);</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统根据输入的时间区间统计折让后收入、折让量、支出、利润，生成经营情况表并返回</td>
</tr></table>

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="2">需要的服务（需接口）</td>
</tr>
<tr>
<td>服务名</td>
<td>服务</td>
</tr>
<tr>
<td>Table.viewSaleTable</td>
<td>查看销售明细表</td>
</tr>
<tr>
<td>Table.viewManagementProcess</td>
<td>查看经营历程表</td>
</tr>
<tr>
<td>Table.viewManagementSituation</td>
<td>查看经营情况表</td>
</tr></table>

##### 	domain类的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">Table.viewSaleTable</td>
<td>语法</td>
<td>public SaleTableVO viewSaleTable(String time, String goodsName, String client, String salesman, String warehouse);</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统根据输入的时间区间、商品名、客户、业务员、仓库查找销售出货单据，根据销售单据的时间（精确到天），商品名，型号，数量，单价，总额生成销售明细表并返回</td>
</tr>
<tr>
<td rowspan="3">Table.viewManagementProcess</td>
<td>语法</td>
<td>public ArrayList<ReceiptVO> viewManagementProcess(String time, String receiptType, String client, String salesman, String warehouse);</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统根据输入的时间区间、单据类型、客户、业务员、仓库查找单据，并返回单据</td>
</tr>
<tr>
<td rowspan="3">Table.viewManagementSituation</td>
<td>语法</td>
<td>public SituationTableVO viewManagementSituation(String time);</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统根据输入的时间区间统计折让后收入、折让量、支出、利润，生成经营情况表并返回</td>
</tr></table>

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="2">需要的服务（需接口）</td>
</tr>
<tr>
<td>服务名</td>
<td>服务</td>
</tr>
<tr>
<td>RemoteHelper.getTableDataService()</td>
<td>得到Table数据的服务的引用</td>
</tr>
<tr>
<td>TableDataService.viewSaleTable(String time, String goodsName, String client, String salesman, String warehouse)</td>
<td>根据时间区间、商品名、客户、业务员、仓库查找SaleOutReceiptPO单一持久化对象，生成并返回SaleTablePO单一持久化对象</td>
</tr>
<tr>
<td>TableDataService.viewManagementProcess(String time, String receiptType, String client, String salesman, String warehouse)</td>
<td>根据时间区间、单据类型、客户、业务员、仓库查找并返回ReceiptPO单一持久化对象</td>
</tr>
<tr>
<td>TableDataService.viewManagementSituation(String time)</td>
<td>根据时间区间生成并返回SituationTablePO单一持久化对象</td>
</tr></table>

##### 4.2.10.4 动态模型
单据查看的系统顺序图如图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/table%E6%9F%A5%E7%9C%8B%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)    

红冲的系统顺序图如图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/table%E7%BA%A2%E5%86%B2%E4%B8%8E%E7%BA%A2%E5%86%B2%E5%A4%8D%E5%88%B6%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)


##### 4.2.10.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

#### 4.2.11 verifybl模块
##### 4.2.11.1 模块概述
verifybl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。
verifybl模块的职责和接口参见软件系统结构描述文档内对该模块的描述。
##### 4.2.11.2 整体结构
根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。为了增加灵活性，在展示层和业务逻辑层之间添加businesslogicservice.verifyblservice接口。业务逻辑层和数据层之间添加dataservice.verifydataservice接口。为了隔离业务逻辑职责和逻辑控制职责，我们增加了verifyController，这样verifyController会将对用户的业务逻辑处理委托给verify对象。verifyPO是作为系统用户信息的持久化对象被添加到设计模型里去的。

verifybl的设计如下图所示：  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/verify.png)

##### 4.2.11.3 内部类的接口规范
##### 	Controller类的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">VerifyController.viewReceipts</td>
<td>语法</td>
<td>public ArrayList<ReceiptVO> viewReceipts();</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有为提交状态的单据</td>
</tr>
<tr>
<td rowspan="3">VerifyController.pass</td>
<td>语法</td>
<td>public ResultMessage pass(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化存储该单据为审批后状态</td>
</tr>
<tr>
<td rowspan="3">VerifyController.passAll</td>
<td>语法</td>
<td>public ResultMessage passAll(ArrayList<ReceiptVO> List);</td>
</tr>
<tr>
<td>前置条件</td>
<td>此批单据全为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化存储此批单据为审批后状态</td>
</tr>
<tr>
<td rowspan="3">VerifyController.update</td>
<td>语法</td>
<td>public ResultMessage update(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化更新该单据信息</td>
</tr>
<tr>
<td rowspan="3">VerifyController.updateCommodity</td>
<td>语法</td>
<td>public void updateCommodity(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为库存类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更改库存数据</td>
</tr>
<tr>
<td rowspan="3">VerifyController.informCommodity</td>
<td>语法</td>
<td>public void informCommodity(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为库存类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统通知库存管理人员其单据已被审批通过</td>
</tr>
<tr>
<td rowspan="3">VerifyController.updateCommodityAndClient</td>
<td>语法</td>
<td>public void updateCommodityAndClient(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为进货类单据或销售类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更改库存数据和客户的应收应付数据</td>
</tr>
<tr>
<td rowspan="3">VerifyController.updateClient</td>
<td>语法</td>
<td>public void updateClient(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为财务类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更改客户的应收应付数据</td>
</tr>
<tr>
<td rowspan="3">VerifyController.informFinance</td>
<td>语法</td>
<td>public void informFinance(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为财务类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统通知财务人员其单据已被审批通过</td>
</tr></table>

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="2">需要的服务（需接口）</td>
</tr>
<tr>
<td>服务名</td>
<td>服务</td>
</tr>
<tr>
<td>Verify.viewReceipts</td>
<td>查看所有待审批单据</td>
</tr>
<tr>
<td>Verify.pass</td>
<td>当前单据审核通过</td>
</tr>
<tr>
<td>Verify.passAll</td>
<td>此批单据审核通过</td>
</tr>
<tr>
<td>Verify.update</td>
<td>更新单据内容信息</td>
</tr>
<tr>
<td>Verify.updateCommodity</td>
<td>更新库存数据</td>
</tr>
<tr>
<td>Verify.informCommodity</td>
<td>通知库存管理人员其单据已被审批通过</td>
</tr>
<tr>
<td>Verify.updateCommodityAndClient</td>
<td>更新库存和客户的应收应付数据</td>
</tr>
<tr>
<td>Verify.updateClient</td>
<td>更新客户的应收应付数据</td>
</tr>
<tr>
<td>Verify.informFinance</td>
<td>通知财务人员其单据已被审批通过</td>
</tr></table>

##### 	domain类的接口规范
<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">Verify.viewReceipts</td>
<td>语法</td>
<td>public ArrayList<ReceiptVO> viewReceipts();</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有为提交状态的单据</td>
</tr>
<tr>
<td rowspan="3">Verify.pass</td>
<td>语法</td>
<td>public ResultMessage pass(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化存储该单据为审批后状态</td>
</tr>
<tr>
<td rowspan="3">Verify.passAll</td>
<td>语法</td>
<td>public ResultMessage passAll(ArrayList<ReceiptVO> List);</td>
</tr>
<tr>
<td>前置条件</td>
<td>此批单据全为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化存储此批单据为审批后状态</td>
</tr>
<tr>
<td rowspan="3">Verify.update</td>
<td>语法</td>
<td>public ResultMessage update(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统持久化更新该单据信息</td>
</tr>
<tr>
<td rowspan="3">Verify.updateCommodity</td>
<td>语法</td>
<td>public void updateCommodity(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为库存类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更改库存数据</td>
</tr>
<tr>
<td rowspan="3">Verify.informCommodity</td>
<td>语法</td>
<td>public void informCommodity(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为库存类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统通知库存管理人员其单据已被审批通过</td>
</tr>
<tr>
<td rowspan="3">Verify.updateCommodityAndClient</td>
<td>语法</td>
<td>public void updateCommodityAndClient(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为进货类单据或销售类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更改库存数据和客户的应收应付数据</td>
</tr>
<tr>
<td rowspan="3">Verify.updateClient</td>
<td>语法</td>
<td>public void updateClient(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为财务类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更改客户的应收应付数据</td>
</tr>
<tr>
<td rowspan="3">Verify.informFinance</td>
<td>语法</td>
<td>public void informFinance(ReceiptVO vo);</td>
</tr>
<tr>
<td>前置条件</td>
<td>该单据为财务类单据</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统通知财务人员其单据已被审批通过</td>
</tr></table>

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="2">需要的服务（需接口）</td>
</tr>
<tr>
<td>服务名</td>
<td>服务</td>
</tr>
<tr>
<td>DataFactory.getVerifyData()</td>
<td>得到Verify数据的服务的引用</td>
</tr>
<tr>
<td>ReceiptDataService.viewReceipts()</td>
<td>返回所有状态信息为提交状态的ReceiptPO单一持久化对象</td>
</tr>
<tr>
<td>ReceiptDataService.pass(ReceiptPO po)</td>
<td>更新ReceiptPO单一持久化对象状态信息为审批后状态</td>
</tr>
<tr>
<td>ReceiptDataService.passAll(ArrayList<ReceiptPO> List)</td>
<td>更新此批ReceiptPO单一持久化对象状态信息为审批后状态</td>
</tr>
<tr>
<td>ReceiptDataService.update(ReceiptPO po)</td>
<td>更新ReceiptPO单一持久化对象</td>
</tr>
<tr>
<td>ReceiptDataService.updateCommodity(ReceiptPO po)</td>
<td>更新GoodsPO单一持久化对象的库存数量信息</td>
</tr>
<tr>
<td>ReceiptDataService.updateCommodityAndClient(ReceiptPO po)</td>
<td>更新GoodsPO单一持久化对象的库存数量信息和ClientPO单一持久化对象的应收应付信息</td>
</tr>
<tr>
<td>ReceiptDataService.updateClient(ReceiptPO po)</td>
<td>更新ClientPO单一持久化对象的应收应付信息</td>
</tr></table>



##### 4.2.11.4 动态模型
单据审核的系统顺序图如图所示  
![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/verify%E5%AE%A1%E6%89%B9%E9%80%9A%E8%BF%87%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)  

![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE/verify%E6%9B%B4%E6%96%B0%E5%8F%8A%E9%80%9A%E7%9F%A5%E9%A1%BA%E5%BA%8F%E5%9B%BE.png)

##### 4.2.11.5 设计原理
利用委托式控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。


### 4.3 数据层的分解
数据层模块的分解详见体系结构描述文档中的相关描述。
#### 4.3.1 UserData模块




<table>
<tr>
<td colspan="4">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">User.insert</td>
<td>语法</td>
<td>public ResultMessage insert(UserPO po)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该用户原先不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统向数据库新增一条PO记录</td>
</tr>
<tr>
<td rowspan="3">User.delete</td>
<td>语法</td>
<td>public ResultMessage delete(UserPO po)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该用户原先存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除数据库中一条PO记录</td>
</tr>
<tr>
<td rowspan="3">User.update</td>
<td>语法</td>
<td>public ResultMessage update(UserPO po)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该用户原先存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改数据库中一条PO记录</td>
</tr>
<tr>
<td rowspan="3">User.findById</td>
<td>语法</td>
<td>public ArrayList<UserPO> findById(String id)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规则</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回相应ID的PO记录</td>
</tr>
<tr>
<td rowspan="3">User.findByName</td>
<td>语法</td>
<td>public ArrayList<UserPO> findByName(String name)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规则</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回相应用户名的PO记录</td>
</tr>
<tr>
<td rowspan="3">User.findByType</td>
<td>语法</td>
<td>public ArrayList<UserPO> findByType(UserType type)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规则</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回相应用户类型的PO记录</td>
</tr>
<tr>
<td rowspan="3">User.show</td>
<td>语法</td>
<td>public ArrayList<UserPO> show()</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有用户的PO记录</td>
</tr>
</table>

#### 4.3.2 CommodityData模块

<table>
<tr>
<td colspan="4">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">Commodity.insert</td>
<td>语法</td>
<td>public ResultMessage insert(CommodityPO po)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统向数据库新增一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Commodity.delete</td>
<td>语法</td>
<td>public ResultMessage delete(CommodityPO po)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除数据库中一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Commodity.update</td>
<td>语法</td>
<td>public ResultMessage update(CommodityPO po)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品原先存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改数据库中一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Commodity.findById</td>
<td>语法</td>
<td>public ArrayList<CommodityPO> findById(String id)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规则</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回相应ID的PO记录</td>
</tr>
<tr>
<td rowspan="3">Commodity.findByName</td>
<td>语法</td>
<td>public ArrayList<CommodityPO> findByName(String name)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规则</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回相应商品名的PO记录</td>
</tr>
<tr>
<td rowspan="3">Commodity.show</td>
<td>语法</td>
<td>public ArrayList<CommodityPO> show(String beginTime.String endTime)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规则</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回相应时间段的PO记录</td>
</tr>
<tr>
<td rowspan="3">Commodity.check</td>
<td>语法</td>
<td>public ResultMessage check()</td>
</tr>
<tr>
<td>前置条件</td>
<td>到达预设业务结束时间</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统保存库存PO记录</td>
</tr>
<tr>
<td rowspan="3">Commodity.analysis</td>
<td>语法</td>
<td>public ResultMessage analysis(long goodNum)</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统更新PO记录总数信息</td>
</tr>
<tr>
<td rowspan="3">Commodity.sendGift</td>
<td>语法</td>
<td>public ResultMessage sendGift(CommodityPO po)</td>
</tr>
<tr>
<td>前置条件</td>
<td>该商品存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>记录该PO为赠送项</td>
</tr>
<tr>
<td rowspan="3">Commodity.warning</td>
<td>语法</td>
<td>public ResultMessage warning()</td>
</tr>
<tr>
<td>前置条件</td>
<td>库存数低于警戒值</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统报警并记录报警信息</td>
</tr>
</table>

#### 4.3.3 ClientData 模块

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">ClientDataService.add</td>
<td>语法</td>
<td>public void add(ClientPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>同样编号的po在数据库中不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中增加一个po记录</td>
</tr>
<tr>
<td rowspan="3">ClientDataService.delete</td>
<td>语法</td>
<td>public void delete(ClientPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中删除一个po记录</td>
</tr>
<tr>
<td rowspan="3">ClientDataService.update</td>
<td>语法</td>
<td>public void update(ClientPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>在数据库中存在同样ID的po</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中更新一个po记录</td>
</tr><tr>
<td rowspan="3">ClientDataService.findByID</td>
<td>语法</td>
<td>public ClientPO findByID(String ID) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>根据输入的编号查找返回ClientPO结果</td>
</tr>
<tr>
<td rowspan="3">ClientDataService.findByKeyword</td>
<td>语法</td>
<td>public ArrayList<ClientPO> findByKeyword(String keyword) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>根据输入的关键词查找返回含此关键词的ClientPO结果</td>
</tr>
<tr>
<td rowspan="3">ClientDataService.show</td>
<td>语法</td>
<td>public ArrayList<ClientPO> show() throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有的ClientPO记录</td>
</tr></table>

#### 4.3.4 SalesData模块

<table>
<tr>
<td colspan="4">提供的服务(供接口)</td>
</tr>
<tr>
<td rowspan="3">Sales.insert</td>
<td>语法</td>
<td>public ResultMessage insert(SalesPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>相同的po记录之前不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统新增一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Sales.update</td>
<td>语法</td>
<td>public ResultMessage update(SalesPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>数据库存在相同id的PO记录</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Sales.sendToVerify</td>
<td>语法</td>
<td>public ResultMessage sendToVerify(SalesPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统将PO记录发送至审批处</td>
</tr>
</table>

#### 4.3.5 PurchaseData模块

<table>
<tr>
<th colspan="4">提供的服务(供接口)</th>
</tr>
<tr>
<td rowspan="3">Purchase.insert</td>
<td>语法</td>
<td>public ResultMessage insert(PurchasePO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>相同的po记录之前不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统新增一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Purchase.update</td>
<td>语法</td>
<td>public ResultMessage update(PurchasePO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>数据库存在相同id的PO记录</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Purchase.sendToVerify</td>
<td>语法</td>
<td>public ResultMessage sendToVerify(PurchasePO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统将PO记录发送至审批处</td>
</tr>
</table>

#### 4.3.6 AccountData模块

<table>
<tr>
<td colspan="4">提供的服务(供接口)</td>
</tr>
<tr>
<td rowspan="3">Account.insert</td>
<td>语法</td>
<td>public ResultMessage insert(AccountPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>相同的po记录之前不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统新增一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Account.delete</td>
<td>语法</td>
<td>public ResultMessage delete(AccountPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Account.update</td>
<td>语法</td>
<td>public ResultMessage update(AccountPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>数据库存在相同id的PO记录</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Account.findById</td>
<td>语法</td>
<td>public ArrayList<AccountPO> findById(String id)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合查找条件的Po记录</td>
</tr>
<tr>
<td rowspan="3">Account.findByName</td>
<td>语法</td>
<td>public ArrayList<AccountPO> findByName(String name)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>输入符合规范</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回符合查找条件的PO记录</td>
</tr>
<tr>
<td rowspan="3">Account.show</td>
<td>语法</td>
<td>public ArrayList<AccountPO> show()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有账户信息的PO记录</td>
</tr>
</table>

#### 4.3.7 PaymentData模块

<table>
<tr>
<td colspan="4">提供的服务(供接口)</td>
</tr>
<tr>
<td rowspan="3">Payment.insert</td>
<td>语法</td>
<td>public ResultMessage insert(PaymentPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>相同的po记录之前不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统新增一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Payment.update</td>
<td>语法</td>
<td>public ResultMessage update(PaymentPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>数据库存在相同id的PO记录</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Payment.sendToVerify</td>
<td>语法</td>
<td>public ResultMessage sendToVerify(PaymentPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统将PO记录发送至审批处</td>
</tr>
</table>

#### 4.3.8 BillData模块

<table>
<tr>
<td colspan="4">提供的服务(供接口)</td>
</tr>
<tr>
<td rowspan="3">Bill.insert</td>
<td>语法</td>
<td>public ResultMessage insert(BillPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>相同的po记录之前不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统新增一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Bill.update</td>
<td>语法</td>
<td>public ResultMessage update(BillPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>数据库存在相同id的PO记录</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统修改一条PO记录</td>
</tr>
<tr>
<td rowspan="3">Bill.delete</td>
<td>语法</td>
<td>public ResultMessage delete(BillPO po)throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>存在该PO记录</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统删除该PO记录</td>
</tr>
<tr>
<td rowspan="3">Bill.show</td>
<td>语法</td>
<td>public ArrayList<BillPO> show()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回当前所有账目的PO记录</td>
</tr>
<tr>
<td rowspan="3">Bill.showInitial</td>
<td>语法</td>
<td>public ArrayList<BillPO> showInitial()throws RemoteException</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>系统返回所有期初账目的PO记录</td>
</tr>
</table>

#### 4.3.9 TableData模块

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">TableDataService.viewSaleTable</td>
<td>语法</td>
<td>public SaleTablePO viewSaleTable(String time, String goodsName, String client, String salesman, String warehouse) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>根据时间区间、商品名、客户、业务员、仓库查找SaleOutReceiptPO单一持久化对象，生成并返回SaleTablePO单一持久化对象</td>
</tr>
<tr>
<td rowspan="3">TableDataService.viewManagementProcess</td>
<td>语法</td>
<td>public ArrayList<ReceiptPO> viewManagementProcess(String time, String receiptType, String client, String salesman, String warehouse) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>根据时间区间、单据类型、客户、业务员、仓库查找并返回ReceiptPO单一持久化对象</td>
</tr>
<tr>
<td rowspan="3">TableDataService.reverse</td>
<td>语法</td>
<td>public void reverse(ReceiptPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中生成一个一模一样但是仅仅把数量取负数的ReceiptPO单一持久化对象</td>
</tr>
<tr>
<td rowspan="3">TableDataService.reverseAndCopy</td>
<td>语法</td>
<td>public void reverseAndCopy(ReceiptPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中生成一个一模一样但是仅仅把数量取负数的ReceiptPO单一持久化对象，并生成一个以之前单子为模板的状态信息为草稿状态的ReceiptPO单一持久化对象</td>
</tr>
<tr>
<td rowspan="3">TableDataService.viewManagementSituation</td>
<td>语法</td>
<td>public SituationTablePO viewManagementSituation(String time) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>根据时间区间生成并返回SituationTablePO单一持久化对象</td>
</tr></table>

#### 4.3.10 PromotionData 模块

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">PromotionDataService.add</td>
<td>语法</td>
<td>public void add(StrategyPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>同样的po在数据库中不存在</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中增加一个po记录</td>
</tr>
<tr>
<td rowspan="3">PromotionDataService.delete</td>
<td>语法</td>
<td>public void delete(StrategyPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中删除一个po记录</td>
</tr>
<tr>
<td rowspan="3">PromotionDataService.update</td>
<td>语法</td>
<td>public void update(StrategyPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中更新一个po记录</td>
</tr>
<tr>
<td rowspan="3">PromotionDataService.show</td>
<td>语法</td>
<td>public ArrayList<StrategyVO> show() throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有的StrategyPO记录</td>
</tr>
<tr>
<td rowspan="3">PromotionDataService.addGiftReceipt</td>
<td>语法</td>
<td>public ResultMessage addGiftReceipt(String rank, Double totalPrice) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>客户的级别或商品总价达到赠品条件</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中添加一个GiftReceiptPO记录</td>
</tr></table>

#### 4.3.11 VerifyData模块

<table width="100%" border="0" bordercolor="#FFFFFF">
<tr bordercolor="#FFFFFF">
<td colspan="3">提供的服务（供接口）</td>
</tr>
<tr>
<td rowspan="3">VerifyDataService.viewReceipts</td>
<td>语法</td>
<td>public ArrayList<ReceiptPO> viewReceipts() throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>返回所有状态信息为提交状态的ReceiptPO记录</td>
</tr>
<tr>
<td rowspan="3">VerifyDataService.pass</td>
<td>语法</td>
<td>public void pass(ReceiptPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>该ReceiptPO记录的状态信息为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>更新该ReceiptPO单一持久化对象状态信息为审批后状态</td>
</tr>
<tr>
<td rowspan="3">VerifyDataService.passAll</td>
<td>语法</td>
<td>public void passAll(ArrayList<ReceiptPO> List) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>此批ReceiptPO记录的状态信息全为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>更新此批ReceiptPO单一持久化对象状态信息为审批后状态</td>
</tr>
<tr>
<td rowspan="3">VerifyDataService.update</td>
<td>语法</td>
<td>public void update(ReceiptPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>该ReceiptPO记录的状态信息为提交状态</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中更新该ReceiptPO单一持久化对象</td>
</tr>
<tr>
<td rowspan="3">VerifyDataService.updateCommodity</td>
<td>语法</td>
<td>public void updateCommodity(ReceiptPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中更新GoodsPO单一持久化对象的库存数量信息</td>
</tr>
<tr>
<td rowspan="3">VerifyDataService.updateCommodityAndClient</td>
<td>语法</td>
<td>public void updateCommodityAndClient(ReceiptPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中更新GoodsPO单一持久化对象的库存数量信息和ClientPO单一持久化对象的应收应付信息</td>
</tr>
<tr>
<td rowspan="3">VerifyDataService.updateClient</td>
<td>语法</td>
<td>public void updateClient(ReceiptPO po) throws RemoteException;</td>
</tr>
<tr>
<td>前置条件</td>
<td>无</td>
</tr>
<tr>
<td>后置条件</td>
<td>在数据库中更新ClientPO单一持久化对象的应收应付信息</td>
</tr></table>

## 5.依赖视角
下图是客户端和其包之间的的依赖关系

![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/体系结构文档图片/客户端开发包图.png)  

下图是服务器端和其包间的依赖关系   

![image](http://101.37.19.32:10080/161250178/ERPnju/raw/master/doc/img/体系结构文档图片/服务器端开发包图.png)